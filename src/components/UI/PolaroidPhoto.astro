---
const {
  src,
  alt,
  caption,
  rotation = 0,
  zIndex = 1,
  index,
  offsetX = 0,
  offsetY = 0,
} = Astro.props;
---

<div
  class="polaroid-card absolute w-56 h-72 bg-neutral-50 p-3 pb-10 cursor-grab select-none active:cursor-grabbing"
  data-index={index}
  style={`transform: rotate(${rotation}deg); z-index: ${zIndex}; left: ${offsetX}px; top: ${offsetY}px;`}
>
  <div
    class="polaroid-image-container w-full aspect-square overflow-hidden bg-neutral-200 mb-2 pointer-events-none
              shadow-[inset_0_2px_8px_rgba(0,0,0,0.15),inset_0_1px_4px_rgba(0,0,0,0.1)] relative"
  >
    <div class="polaroid-reveal-overlay absolute inset-0 bg-white z-10"></div>
    <img
      src={src}
      alt={alt}
      class="polaroid-image w-full h-full object-cover block pointer-events-none opacity-0"
      draggable="false"
    />
  </div>
  <p
    class="text-center text-sm text-neutral-600 mt-2 leading-relaxed pointer-events-none font-['Courier_New',monospace]"
  >
    {caption}
  </p>
</div>

<style>
  .polaroid-reveal-overlay {
    transition: opacity 1.5s ease-out;
  }

  .polaroid-image {
    transition: opacity 1.5s ease-out;
  }

  .polaroid-card.revealing .polaroid-reveal-overlay {
    opacity: 0;
  }

  .polaroid-card.revealing .polaroid-image {
    opacity: 1;
  }
</style>
